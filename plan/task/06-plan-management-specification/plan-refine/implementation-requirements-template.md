# Implementation Requirements Template

**Generated**: When refine phase completes and transitions to implement phase

---

## Template Structure

```markdown
# Implementation Requirements: {Task Title}

**Generated**: {YYYY-MM-DD}
**Plan**: .claude/plans/{task-name}/
**Phase Transition**: refine → implement

---

## Overview

{Brief description of implementation scope}

**Configuration**: Access via `plan-files` skill `read-config` operation

---

## Component Summary

| Component | Scope | Complexity | Tasks |
|-----------|-------|------------|-------|
| {name} | {description} | {low/med/high} | {task-ids} |

---

## Task Details

### Task {N}: {Task Title}

**Dependencies**: {task-ids or "none"}

#### Goal

{Clear description of what success looks like for this task}

#### Implementation Guidance

{Specific technical guidance including:
- Approach recommendations
- Patterns to follow
- Constraints to observe
- Edge cases to handle}

#### Files

| Action | Path | Description |
|--------|------|-------------|
| Create | {path} | {purpose} |
| Modify | {path} | {changes} |

#### Acceptance Criteria

- [ ] {Specific, measurable criterion}
- [ ] {Test-like assertion}

#### Quality Requirements

| Requirement | Target |
|-------------|--------|
| Test Coverage | ≥80% |
| Build Status | passing |
| Documentation | {required/optional} |

---

## Dependency Graph

```
Task 1: {name} (foundation)
    │
    ▼
Task 2: {name}
    │
    ├──────────────┬───────────────┐
    ▼              ▼               ▼
Task 3: {name}  Task 4: {name}  Task 5: {name}
    │              │
    └──────────────┴───────────────┐
                                   ▼
                            Task 6: {name} (integration)
```

**Execution Order**: Task 1 → Task 2 → [Task 3, Task 4, Task 5 (parallel)] → Task 6

---

## References

**Source**: `.claude/plans/{task-name}/references.md`

All references are managed via skill operations. **Do NOT access files directly.**

| Reference Type | Skill/API Operation |
|----------------|---------------------|
| Issue & Branch | `plan-files` skill `get-references` operation |
| ADRs | `adr-management` skill |
| Interfaces | `interface-management` skill |
| Local Files | `plan-files` skill `get-references` operation |
| External Docs | `plan-files` skill `get-references` operation |
| Dependencies | `plan-files` skill `get-references` operation |

**Note**: Do NOT duplicate reference content. Do NOT access references.md directly. Always use skill operations.

---

## Quality Gates

Before each task can be marked complete, use skill operations:

| Gate | Skill/Agent | Purpose |
|------|-------------|---------|
| Build Verification | `maven-builder` or `npm-builder` agent | Run build and fix errors |
| Test Execution | `java-implement-tests-agent` or `js-implement-tests` command | Verify tests pass |
| Coverage Check | `java-coverage-agent` or `js-generate-coverage` command | Verify ≥80% coverage |
| Documentation | `java-fix-javadoc-agent` or `js-fix-jsdoc` command | Verify docs complete |

**Note**: Do NOT run build commands directly. Always use skill/agent operations.

---

## Commit Strategy

**Strategy**: {fine-granular|phase-specific|complete}

### Fine-Granular (Recommended)
- Commit after each task completion
- Message format: `{type}: Task {N} - {description}`
- Example: `feat: Task 2 - Add TokenValidator interface`

### Phase-Specific
- Commit at end of implement phase
- Message format: `{type}: Implement {task-title}`

### Complete
- Single commit when all work done
- Message format: `{type}: Complete {task-title}`

---

## Implementation Notes

{Any additional notes, decisions, or context from refine phase that helps implementation:

- Design decisions made during refinement
- Alternative approaches considered
- Known limitations or constraints
- Future improvement opportunities}

---

## Pre-Implementation Checklist

Before starting implementation:

- [ ] All tasks reviewed and understood
- [ ] Dependencies correctly identified
- [ ] References accessible (ADRs, interfaces, code)
- [ ] Build system working (via `maven-builder` or `npm-builder` agent)
- [ ] Branch correct: {branch-name}
- [ ] Issue linked: {issue-reference}

---

**Generated by**: plan-refine skill
**Artifact version**: 1.0
```

---

## Field Descriptions

### Required Fields

| Field | Description | Source |
|-------|-------------|--------|
| Task Title | Main task title | plan.md |
| Generated Date | When artifact created | System |
| Components | Analyzed components | Refine analysis |
| Tasks | Implementation tasks | Refine planning |
| Dependencies | Task order | Refine planning |

### Configuration Access (via Skill Operations)

Configuration is NOT duplicated in this artifact. Access via `plan-files` skill `read-config` operation:

| Config | Description | Source |
|--------|-------------|--------|
| Technology | Primary tech stack | config.md |
| Build System | Build tool | config.md |
| Compatibility | Breaking/deprecations | config.md |
| Commit Strategy | When to commit | config.md |
| Finalizing | How to complete work | config.md |
| Branch | Git branch | config.md |
| Issue | Linked issue | config.md |

### Optional Fields

| Field | Description | When Included |
|-------|-------------|---------------|
| Implementation Notes | Additional context | When decisions recorded |

### Reference Access (via Skill Operations)

References are NOT duplicated in this artifact. Access via skill operations only:

| Reference Type | Skill Operation | Purpose |
|----------------|-----------------|---------|
| ADRs | `adr-management` skill | Read/verify architecture decisions |
| Interfaces | `interface-management` skill | Read/verify interface specs |
| Issue, Files, Docs, Dependencies | `plan-files` skill `get-references` | Retrieve from references.md |

**Important**: Never access references.md directly. All reference access goes through the skill API.

---

## Generation Rules

### When to Generate

Generate implementation-requirements.md when:
1. Refine phase completes all 3 tasks
2. User confirms task list
3. Transitioning to implement phase

### When to Update

Update implementation-requirements.md when:
1. Tasks are modified during refine
2. New references added
3. User requests regeneration

### When to Archive

Archive implementation-requirements.md when:
1. Implement phase completes
2. Plan is finalized
3. Keep for project history

---

## Example: JWT Authentication Task

```markdown
# Implementation Requirements: JWT Authentication

**Generated**: 2025-01-15
**Plan**: .claude/plans/jwt-authentication/
**Phase Transition**: refine → implement

---

## Overview

Implement JWT-based authentication with token validation, refresh token support, and secure storage.

**Configuration**: Access via `plan-files` skill `read-config` operation

---

## Component Summary

| Component | Scope | Complexity | Tasks |
|-----------|-------|------------|-------|
| TokenValidator | JWT parsing and validation | medium | 1, 2 |
| TokenService | Token generation and refresh | high | 3, 4 |
| SecurityConfig | Spring Security integration | medium | 5 |

---

## Task Details

### Task 1: Create TokenValidator Interface

**Dependencies**: none

#### Goal

Create the TokenValidator interface that defines the contract for JWT validation.

#### Implementation Guidance

- Use Java 17+ records for token claims
- Follow existing interface patterns in codebase
- Support both RS256 and HS256 algorithms
- Return validation result with detailed error info

#### Files

| Action | Path | Description |
|--------|------|-------------|
| Create | src/main/java/com/example/auth/TokenValidator.java | Main interface |
| Create | src/main/java/com/example/auth/TokenValidationResult.java | Result record |

#### Acceptance Criteria

- [ ] Interface defines validate(String token) method
- [ ] Result includes validation status and claims
- [ ] JavaDoc complete on all public methods

#### Quality Requirements

| Requirement | Target |
|-------------|--------|
| Test Coverage | ≥80% |
| Build Status | passing |
| Documentation | required |

---

[Additional tasks follow same pattern...]

---

## References

**Source**: `.claude/plans/jwt-authentication/references.md`

Access via skill operations:
- Issue & branch: `plan-files` skill `get-references` operation
- ADR-015: `adr-management` skill
- Files & external docs: `plan-files` skill `get-references` operation

---

**Generated by**: plan-refine skill
```

---

## Related

- [Refine Phase Specification](refine.md) - Main refine phase documentation
- [Implement Phase](../plan-implement/implement.md) - Implement phase specification (uses this artifact)
- [Plan Templates](../templates-workflow.md) - Plan file templates
- [Persistence](../plan-files/persistence.md) - File structure specifications
